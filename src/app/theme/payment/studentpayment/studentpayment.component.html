<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header" style="background-color: #e2e3f9;">
                <h5>Student Payment Challlan</h5>
                <h6 style="float: right;"> Fields marked with (<sub class="required">*</sub>) are mandatory</h6>
            </div>
            <div class="card-block">
                <form action="javascript:" [formGroup]="angForm" novalidate>
                    <div class="row">
                        <div class="col-sm-2" style="max-width: 14%">
                            <label for="Application_Date">Application Date</label>
                        </div>
                        <div class="col-sm-2">
                            <div class="form-group input-group">
                                <span class="border-lable-flt">
                                    <input type="date" name="Application_Date" class="form-control" placeholder=" "
                                        max="{{datemax | date:'yyyy-MM-dd'}}" #date (focusout)="disabledate(date.value)"
                                        id="Application_Date" [(ngModel)]="applicationDate"
                                        formControlName="Application_Date">
                                </span>
                            </div>
                            <div class="form-group form-primary form-static-label"
                                *ngIf="angForm.controls['Application_Date'].invalid && (angForm.controls['Application_Date'].dirty || angForm.controls['Application_Date'].touched)"
                                class="alert alert-danger">
                                <div *ngIf="angForm.controls['Application_Date'].errors?.required">
                                    This is required field
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-2" style="max-width: 14%">
                            <label for="Received_From">Received From<sub class="required">* </sub></label>
                        </div>
                        <div class="col-sm-5">
                            <div class="form-group input-group">
                                <span class="border-lable-flt">
                                    <input type="text" name="Received_From" class="form-control"
                                        placeholder="Enter Received From " id="Received_From" pattern="^[A-Za-z\./ -]+$"
                                        title="Input allowed only  A-Z a-z (Space)" formControlName="Received_From">
                                </span>
                            </div>
                            <div class="form-group form-primary form-static-label"
                                *ngIf="angForm.controls['Received_From'].invalid && (angForm.controls['Received_From'].dirty || angForm.controls['Received_From'].touched)"
                                class="alert alert-danger">
                                <div
                                    *ngIf="angForm.controls['Received_From'].errors?.required  || angForm.controls['Received_From'].errors?.pattern">
                                    This is required field
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-1"></div>
                        <!-- <div class="col-sm-1" style="max-width: 13%">
                            <label for="Examination">Examination<sub class="required">* </sub></label>
                        </div>
                        <div class="col-sm -1">
                            <div class="form-group input-group">
                                <span class="border-lable-flt">
                                    <input type="text" name="Examination" class="form-control"
                                        placeholder="Enter Examination " id="Examination" pattern="^[A-Za-z0-9\./ -]+$"
                                        title="Input allowed only  A-Z a-z (Space)" formControlName="Examination">
                                </span>
                            </div>
                            <div class="form-group form-primary form-static-label"
                                *ngIf="angForm.controls['Examination'].invalid && (angForm.controls['Examination'].dirty || angForm.controls['Examination'].touched)"
                                class="alert alert-danger">
                                <div
                                    *ngIf="angForm.controls['Examination'].errors?.required || angForm.controls['Examination'].errors?.pattern  ">
                                    This is required field
                                </div>
                            </div>
                        </div> -->
                    </div>
                    <div class="row">
                        <div class="col-sm-2" style="max-width: 14%">
                            <label for="purpose">Purpose<sub class="required">* </sub></label>
                        </div>
                        <div class="col-sm-8">
                            <div class="form-group input-group">
                                <span class="border-lable-flt">
                                    <ng-select style="font-size: 12px;" [items]="Purpose" bindValue="ID" [disabled]="true"
                                        bindLabel="NAME" formControlName="purpose" [(ngModel)]="selectPurpose"
                                        id="purpose" placeholder="Select Purpose"
                                        (ngModelChange)="getChallanDropdown($event)">
                                    </ng-select>
                                </span>
                            </div>
                            <div class="form-group form-primary form-static-label"
                                *ngIf="angForm.controls['purpose'].invalid && (angForm.controls['purpose'].dirty || angForm.controls['purpose'].touched)"
                                class="alert alert-danger mt-2">
                                <div *ngIf="angForm.controls['purpose'].errors?.required">
                                    This is required field
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-2" style="max-width: 14%">
                            <label for="department">Department<sub class="required">* </sub></label>
                        </div>
                        <div class="col-sm-8" style="margin-bottom: 5px;">
                            <div class="form-group input-group">
                                <span class="border-lable-flt">
                                    <ng-select style="font-size: 12px;" [(ngModel)]="selectDepartment" id="department" [disabled]="true"
                                        formControlName="Select_Department" placeholder="Select Department"
                                        (ngModelChange)="getDepartmentCode($event.ID)">
                                        <ng-option *ngFor="let dept of Department" [value]="dept">
                                            {{dept.NAME}}</ng-option>
                                    </ng-select>
                                </span>
                            </div>
                            <div class="form-group form-primary form-static-label "
                                *ngIf="angForm.controls['Select_Department'].invalid && (angForm.controls['Select_Department'].dirty || angForm.controls['Select_Department'].touched)"
                                class="alert alert-danger mt-2">
                                <div *ngIf="angForm.controls['Select_Department'].errors?.required">
                                    This is required field
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" *ngIf="isTutionFee">
                        <div class="col-sm-2" style="max-width: 14%">
                            <label for="Challan_Structure">Challan Structure<sub class="required">* </sub></label>
                        </div>
                        <div class="col-sm-8">
                            <div class="form-group input-group">
                                <span class="border-lable-flt">
                                    <ng-select style="font-size: 12px;" [(ngModel)]="selectChallan"
                                        id="Challan_Structure" formControlName="Challan_Structure"
                                        placeholder="Select Challan Structure"
                                        (ngModelChange)="getStudentTableDetails($event.ID)">
                                        <ng-option *ngFor="let challan of challanlist" [value]="challan">
                                            {{challan.NAME}}</ng-option>
                                    </ng-select>
                                </span>
                            </div>
                            <div class="form-group form-primary form-static-label"
                                *ngIf="angForm.controls['Challan_Structure'].invalid && (angForm.controls['Challan_Structure'].dirty || angForm.controls['Challan_Structure'].touched)"
                                class="alert alert-danger mt-2">
                                <div *ngIf="angForm.controls['Challan_Structure'].errors?.required">
                                    This is required field
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm">
                            <div style="overflow-x: auto;">
                                <table class="table table-bordered compact">
                                    <thead>
                                        <tr style="background-color: #d6e2f8 !important;">
                                            <th scope="col" style="width: 10%;">Budget Code</th>
                                            <th scope="col" style="width: 35%;">Budget Head</th>
                                            <th scope="col" style="width: 25%;" *ngIf="hideColumn">Particular</th>
                                            <th scope="col" style="width: 10%;  text-align: right;">Amount</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let data of studentDescriptionDetails;let i = index">
                                            <th scope="row" style="word-wrap: break-word">{{data.BUDGET_CODE}}</th>
                                            <td>{{data?.GL_NAME != null ? data.GL_NAME : data.PARTICULARS}}</td>
                                            <td *ngIf="hideColumn" style="word-wrap: break-word">{{data.NAME}}</td>
                                            <td> <input type="text" name="amount" style="text-align: right;width:75%"
                                                    placeholder="Enter Amount " id="amount" pattern="^[0-9]+$"
                                                    title="Input allowed only  A-Z a-z (Space)"
                                                    (focus)="selectAllContent($event)"
                                                    (focusout)="decimalAllContent($event)"
                                                    (mouseup)="$event.preventDefault()" (keyup)="changeAmt($event,i)"
                                                    value="{{ data.AMOUNT != null ?data.AMOUNT.toFixed(2) : 0.00}}">
                                            </td>
                                        </tr>
                                        <tr *ngIf="noDataFound" style="color: #e11313; text-align: center;">
                                            <td colspan="4">
                                                Data Not Found
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-2" style="max-width: 14%">
                            <label for="Enter_Particular">Particulars</label>
                        </div>
                        <div class="col-sm-5">
                            <div class="form-group input-group">
                                <span class="border-lable-flt">
                                    <textarea type="text" name="Enter_Particular" class="form-control" placeholder=" "
                                        style="height: 40px;" pattern="^[A-Za-z0-9\./ -]+$"
                                        title="Input allowed only  A-Z a-z  - / . (Space)" id="Enter_Particular"
                                        maxlength="4000" formControlName="Enter_Particular"></textarea>
                                </span>
                            </div>
                            <div class="form-group form-primary form-static-label"
                                *ngIf="angForm.controls['Enter_Particular'].invalid && (angForm.controls['Enter_Particular'].dirty || angForm.controls['Enter_Particular'].touched)"
                                class="alert alert-danger">
                                <div *ngIf="angForm.controls['Enter_Particular'].errors?.pattern">
                                    Input allowed only A-Z a-z 0-9 - / . (Space)
                                </div>
                            </div>
                        </div>
                        <div class="col-sm">
                        </div>
                        <div class="col-sm-2" style="max-width: 14%">
                            <label for="Total_Amount">Total Amount<sub class="required">* </sub> <i
                                    class="fa fa-rupee"></i></label>
                        </div>
                        <div class="col-sm-2" style="float: right;">
                            <div class="form-group input-group">
                                <span class="border-lable-flt">
                                    <input type="text" name="Total_Amount" class="form-control " placeholder=" "
                                        style="text-align: right;font-size: 21px;" id="Total_Amount"
                                        pattern="^[A-Za-z\./ -]+$" [value]="totalAmount"
                                        title="Input allowed only  A-Z a-z (Space)" formControlName="Total_Amount"
                                        disabled>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="row" style="margin-top:1%">
                        <div class="col-sm-2" style="max-width: 14%">
                            <label for="bankname">Aggregator Bank<sub class="required">* </sub></label>
                        </div>
                        <div class="col-sm-3">
                            <div class="form-group input-group">
                                <ng-select [(ngModel)]="selectedBank" formControlName="bank_code" id="bankname"
                                    placeholder="Select Bank Name" style="width: 240%;">
                                    <ng-option *ngFor="let bank of bankDetails" [value]="bank.ID">
                                        {{bank.NAME}}</ng-option>
                                </ng-select>
                            </div>  
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-sm-12">
                            <div style="float: right;">
                                <button class="btn btn-primary  ripple light " style="margin-right:3px"
                                    (click)="saveAsDraft()" *ngIf="showSaveasDraft">Save As
                                    Draft</button>
                                <button class="btn btn-primary ripple light" (click)="pay()" *ngIf="showSaveAsProcess" style="margin:3px">Save &
                                    Proceed To
                                    Pay</button>
                                    <button class="btn btn-primary ripple light" (click)="updatepay()" *ngIf="showProccedToPay" style="margin:3px">Save &
                                        Proceed To
                                        Pay</button>
                                <button class="btn btn-dark ripple light" [routerLink] = "['/dashboard']">Back</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>